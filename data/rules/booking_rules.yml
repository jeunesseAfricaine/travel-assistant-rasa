---
version: "3.1"
rules:
  - rule: activate booking_form
    steps:
      - intent: start_booking
      - action: booking_form
      - active_loop: booking_form
  - rule: submit form
    condition:
      - active_loop: booking_form
    steps:
      - action: booking_form
      - active_loop: null
      - slot_was_set:
          - requested_slot: null
      - action: utter_confirm_booking
        wait_for_user_input: false
  - rule: Plan vacation + safari
    steps:
      - intent: inform
        entities:
          - travel-type: safari
      - action: safari_form
      - active_loop: safari_form
  - rule: submit form
    condition:
      - active_loop: safari_form
    steps:
      - action: safari_form
      - active_loop: null
      - action: utter_top_deals
  - rule: Plan vacation + themed
    steps:
      - intent: inform
        entities:
          - travel-type: themed
      - action: themed_form
      - active_loop: themed_form
  - rule: submit form
    condition:
      - active_loop: themed_form
    steps:
      - action: themed_form
      - active_loop: null
      - action: utter_top_deals
  - rule: Plan vacation + corporate
    steps:
      - intent: inform
        entities:
          - travel-type: corporate
      - action: corporate_form
      - active_loop: corporate_form
  - rule: submit form
    condition:
      - active_loop: corporate_form
    steps:
      - action: corporate_form
      - active_loop: null
      - action: utter_top_deals
  - rule: Plan vacation + local
    steps:
      - intent: inform
        entities:
          - travel-type: local
      - action: local_form
      - active_loop: local_form
  - rule: submit form
    condition:
      - active_loop: local_form
    steps:
      - action: local_form
      - active_loop: null
      - action: utter_top_deals
